<!DOCTYPE html>
<html>
<head>
  <title>Property Chatbot</title>
</head>
<body>
  <h1>Ask About Properties</h1>

  <input type="text" id="query" placeholder="Type your question..." />
  <button onclick="ask()">Ask</button>

  <div id="response" style="margin-top: 20px; font-family: sans-serif;"></div>

  <script>
  async function ask() {
    const query = document.getElementById('query').value;
    const responseDiv = document.getElementById('response');
    responseDiv.innerHTML = "Loading...";

    try {
      const res = await fetch('/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ text: query })
      });

      const data = await res.json();
      console.log("Response JSON:", data);

      const text = data.answer || "No answer found.";
      responseDiv.innerHTML = text;
    } catch (err) {
      console.error(err);
      responseDiv.innerHTML = "Something went wrong.";
    }
  }
</script>

</body>
</html>
